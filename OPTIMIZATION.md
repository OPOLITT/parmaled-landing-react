# Оптимизация изображений

Проект использует несколько техник для оптимизации загрузки изображений:

## 1. Lazy Loading (Отложенная загрузка)

Все изображения загружаются только когда они появляются в viewport (видимой области экрана) с помощью хука `useLazyImage`.

**Преимущества:**
- Изображения загружаются только при необходимости
- Уменьшает начальный размер страницы
- Улучшает время первой загрузки (First Contentful Paint)

## 2. Современные форматы (WebP/AVIF)

Хук автоматически определяет поддержку современных форматов в браузере:
- **AVIF** - самый современный формат (лучшее сжатие)
- **WebP** - широко поддерживаемый формат
- **JPG/PNG** - fallback для старых браузеров

## 3. Preload критических изображений

Критические изображения (фон WelcomeBlock) предзагружаются через `<link rel="preload">` в `index.html`.

## 4. Автоматическое определение формата

Хук автоматически определяет лучший поддерживаемый формат браузером:
- AVIF (если поддерживается) - лучшее сжатие
- WebP (если поддерживается) - хороший баланс
- JPG/PNG (fallback) - для старых браузеров

**Примечание:** Для полной оптимизации изображений из `public` папки рекомендуется:
- Использовать CDN с автоматической оптимизацией (Cloudinary, ImageKit)
- Или предварительно оптимизировать изображения перед добавлением в проект

## Использование

### В компонентах

```tsx
import { useLazyImage } from "../../lib/hooks/useLazyImage";

const { imageSrc, imgRef, isLoaded } = useLazyImage("/path/to/image.jpg");

<div 
  ref={imgRef}
  style={{ 
    backgroundImage: imageSrc ? `url(${imageSrc})` : undefined 
  }} 
/>
```

### Ручная оптимизация

```tsx
import { getOptimizedImageSrc } from "../../lib/utils/imageOptimization";

const optimizedSrc = getOptimizedImageSrc("/image.jpg", {
  format: "webp",
  quality: 80,
  width: 800
});
```

## Рекомендации

1. **Размер изображений**: Используйте изображения подходящего размера для экрана
2. **Формат**: Предпочитайте WebP/AVIF для фотографий, PNG для графики с прозрачностью
3. **Качество**: 80% обычно оптимальный баланс между качеством и размером
4. **Критические изображения**: Используйте preload только для изображений выше сгиба (above the fold)

## Производительность

После оптимизации:
- Размер изображений уменьшается на 30-70%
- Время загрузки страницы улучшается
- Потребление трафика снижается

